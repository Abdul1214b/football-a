<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistics & Analytics - Football Legends</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #667eea;
            font-weight: 700;
            font-size: 1.5rem;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: #333;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
            padding: 0.5rem 1rem;
            border-radius: 8px;
        }

        .nav-links a:hover {
            color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .main-content {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .page-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .page-header h1 {
            color: #333;
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .page-header p {
            color: #666;
            font-size: 1.1rem;
        }

        .stats-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2rem;
            color: #667eea;
            margin-bottom: 1rem;
        }

        .stat-card h3 {
            color: #333;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .stat-card p {
            color: #666;
            font-size: 0.9rem;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f0f0f0;
        }

        .chart-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
        }

        .chart-controls {
            display: flex;
            gap: 1rem;
        }

        .chart-btn {
            padding: 0.5rem 1rem;
            border: 2px solid #667eea;
            background: transparent;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .chart-btn.active {
            background: #667eea;
            color: white;
        }

        .chart-btn:hover {
            background: #667eea;
            color: white;
        }

        .chart-canvas {
            position: relative;
            height: 300px;
        }

        .data-table {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f0f0f0;
        }

        .table-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
        }

        .table-controls {
            display: flex;
            gap: 1rem;
        }

        .search-input {
            padding: 0.5rem 1rem;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
        }

        .search-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e1e5e9;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .rating-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .rating-high {
            background: #d4edda;
            color: #155724;
        }

        .rating-medium {
            background: #fff3cd;
            color: #856404;
        }

        .rating-low {
            background: #f8d7da;
            color: #721c24;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .main-content {
                padding: 0 1rem;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .chart-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-content">
            <a href="new-dashboard.html" class="logo">
                <i class="fas fa-futbol"></i>
                <span>Football Legends</span>
            </a>
            <ul class="nav-links">
                <li><a href="new-dashboard.html">Dashboard</a></li>
                <li><a href="new-team.html">My Team</a></li>
                <li><a href="new-market.html">Market</a></li>
                <li><a href="new-statistics.html">Statistics</a></li>
                <li><a href="new-history.html">History</a></li>
            </ul>
        </div>
    </nav>

    <div class="main-content">
        <div class="page-header">
            <h1>Statistics & Analytics</h1>
            <p>Comprehensive football statistics and interactive charts</p>
        </div>

        <div class="stats-overview">
            <div class="stat-card">
                <i class="fas fa-users"></i>
                <h3>100+</h3>
                <p>Players Analyzed</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-chart-line"></i>
                <h3>10+</h3>
                <p>Chart Types</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-database"></i>
                <h3>500+</h3>
                <p>Data Points</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-crown"></i>
                <h3>Messi</h3>
                <p>Highest Rated Player</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-calendar"></i>
                <h3>68 Years</h3>
                <p>History Coverage</p>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-container">
                <div class="chart-header">
                    <span class="chart-title">Top 10 Highest Rated Players</span>
                </div>
                <div class="chart-canvas">
                    <canvas id="topRatedHeatmap"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <span class="chart-title">Goals vs Assists</span>
                    <div class="chart-controls">
                        <button class="chart-btn active" id="scatterAllBtn" onclick="updateScatterChart('all')">All</button>
                        <button class="chart-btn" id="scatterTopBtn" onclick="updateScatterChart('top')">Top 20</button>
                    </div>
                </div>
                <div class="chart-canvas">
                    <canvas id="scatterChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <span class="chart-title">Position Distribution</span>
                </div>
                <div class="chart-canvas">
                    <canvas id="pieChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <span class="chart-title">Top 10 Players: Goals & Assists</span>
                </div>
                <div class="chart-canvas">
                    <canvas id="trendChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <span class="chart-title">Average Rating by Position</span>
                </div>
                <div class="chart-canvas">
                    <canvas id="avgRatingByPosition"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <span class="chart-title">Top 10 Most Expensive Defenders</span>
                </div>
                <div class="chart-canvas">
                    <canvas id="expensiveDefenders"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <span class="chart-title">Player Count by Price Range</span>
                </div>
                <div class="chart-canvas">
                    <canvas id="pricePolar"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <span class="chart-title">Top 10 Players by Assists</span>
                </div>
                <div class="chart-canvas">
                    <canvas id="topAssists"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <span class="chart-title">Rating Distribution</span>
                </div>
                <div class="chart-canvas">
                    <canvas id="ratingDoughnut"></canvas>
                </div>
            </div>
        </div>

        <div class="data-table">
            <div class="table-header">
                <span class="table-title">Top Players</span>
                <div class="table-controls">
                    <input type="text" class="search-input" placeholder="Search players..." id="playerSearch">
                    <select class="chart-btn" id="sortSelect">
                        <option value="rating">Sort by Rating</option>
                        <option value="goals">Sort by Goals</option>
                        <option value="assists">Sort by Assists</option>
                        <option value="price">Sort by Price</option>
                    </select>
                </div>
            </div>
            <div class="table-container">
                <table id="playersTable">
                    <thead>
                        <tr>
                            <th>Player</th>
                            <th>Position</th>
                            <th>Rating</th>
                            <th>Goals</th>
                            <th>Assists</th>
                            <th>Price</th>
                        </tr>
                    </thead>
                    <tbody id="playersTableBody">
                        <!-- Table data will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Expanded player data (copied from new-market.html, with dummy goals/assists for missing)
        const playersData = [
            { name: 'Kylian Mbappé', position: 'Forward', rating: 91, goals: 45, assists: 15, price: 120 },
            { name: 'Vinícius Júnior', position: 'Forward', rating: 89, goals: 23, assists: 18, price: 100 },
            { name: 'Jude Bellingham', position: 'Midfielder', rating: 88, goals: 15, assists: 12, price: 95 },
            { name: 'Federico Valverde', position: 'Midfielder', rating: 87, goals: 12, assists: 15, price: 85 },
            { name: 'Luka Modrić', position: 'Midfielder', rating: 86, goals: 8, assists: 20, price: 75 },
            { name: 'Arda Güler', position: 'Midfielder', rating: 82, goals: 5, assists: 8, price: 60 },
            { name: 'Aurélien Tchouaméni', position: 'Midfielder', rating: 84, goals: 4, assists: 7, price: 70 },
            { name: 'Fran Garcia', position: 'Defender', rating: 80, goals: 1, assists: 3, price: 50 },
            { name: 'Ferland Mendy', position: 'Defender', rating: 84, goals: 2, assists: 5, price: 70 },
            { name: 'David Alaba', position: 'Defender', rating: 83, goals: 3, assists: 4, price: 65 },
            { name: 'Eduardo Camavinga', position: 'Midfielder', rating: 85, goals: 3, assists: 8, price: 80 },
            { name: 'Rodrygo', position: 'Forward', rating: 86, goals: 17, assists: 10, price: 90 },
            { name: 'Endrick', position: 'Forward', rating: 80, goals: 7, assists: 2, price: 60 },
            { name: 'Thibaut Courtois', position: 'Goalkeeper', rating: 88, goals: 0, assists: 0, price: 80 },
            { name: 'Éder Militão', position: 'Defender', rating: 85, goals: 2, assists: 2, price: 75 },
            { name: 'Antonio Rüdiger', position: 'Defender', rating: 84, goals: 2, assists: 1, price: 70 },
            { name: 'Dani Carvajal', position: 'Defender', rating: 83, goals: 1, assists: 5, price: 65 },
            { name: 'Andriy Lunin', position: 'Goalkeeper', rating: 80, goals: 0, assists: 0, price: 45 },
            { name: 'Lucas Vázquez', position: 'Defender', rating: 81, goals: 2, assists: 4, price: 55 },
            { name: 'Brahim Díaz', position: 'Midfielder', rating: 82, goals: 4, assists: 6, price: 60 },
            { name: 'Mohamed Salah', position: 'Forward', rating: 90, goals: 30, assists: 12, price: 110 },
            { name: 'Virgil van Dijk', position: 'Defender', rating: 89, goals: 5, assists: 2, price: 95 },
            { name: 'Alisson Becker', position: 'Goalkeeper', rating: 89, goals: 0, assists: 1, price: 85 },
            { name: 'Darwin Nunez', position: 'Forward', rating: 84, goals: 14, assists: 7, price: 70 },
            { name: 'Trent Alexander-Arnold', position: 'Defender', rating: 86, goals: 3, assists: 10, price: 80 },
            { name: 'Alexis Mac Alister', position: 'Midfielder', rating: 83, goals: 5, assists: 7, price: 65 },
            { name: 'Andrew Robertson', position: 'Defender', rating: 85, goals: 2, assists: 8, price: 75 },
            { name: 'Dominik Szoboszlai', position: 'Midfielder', rating: 84, goals: 6, assists: 8, price: 70 },
            { name: 'Harvey Elliott', position: 'Midfielder', rating: 80, goals: 3, assists: 5, price: 55 },
            { name: 'Caoimhin Kelleher', position: 'Goalkeeper', rating: 78, goals: 0, assists: 0, price: 40 },
            { name: 'Cody Gakpo', position: 'Forward', rating: 84, goals: 10, assists: 6, price: 75 },
            { name: 'Luis Diaz', position: 'Forward', rating: 85, goals: 12, assists: 7, price: 80 },
            { name: 'Diogo Jota', position: 'Forward', rating: 84, goals: 11, assists: 5, price: 75 },
            { name: 'Wataru Endo', position: 'Midfielder', rating: 80, goals: 2, assists: 3, price: 50 },
            { name: 'Federico Chiesa', position: 'Forward', rating: 86, goals: 13, assists: 8, price: 85 },
            { name: 'Curtis Jones', position: 'Midfielder', rating: 80, goals: 2, assists: 4, price: 55 },
            { name: 'Ryan Gravenberch', position: 'Midfielder', rating: 82, goals: 3, assists: 5, price: 60 },
            { name: 'Ibrahima Konaté', position: 'Defender', rating: 83, goals: 1, assists: 2, price: 65 },
            { name: 'Conor Bradley', position: 'Defender', rating: 78, goals: 0, assists: 1, price: 40 },
            { name: 'Kostas Tsimikas', position: 'Defender', rating: 79, goals: 0, assists: 3, price: 45 },
            { name: 'Lionel Messi', position: 'Forward', rating: 92, goals: 35, assists: 20, price: 120 },
            { name: 'Luis Suárez', position: 'Forward', rating: 86, goals: 18, assists: 7, price: 85 },
            { name: 'Sergio Busquets', position: 'Midfielder', rating: 84, goals: 1, assists: 6, price: 70 },
            { name: 'Marcelo Weigandt', position: 'Defender', rating: 80, goals: 1, assists: 2, price: 50 },
            { name: 'Facundo Farías', position: 'Forward', rating: 78, goals: 4, assists: 2, price: 45 },
            { name: 'Benjamin Cremaschi', position: 'Midfielder', rating: 77, goals: 2, assists: 2, price: 40 },
            { name: 'David Ruiz', position: 'Midfielder', rating: 77, goals: 1, assists: 2, price: 40 },
            { name: 'Federico Redondo', position: 'Midfielder', rating: 77, goals: 1, assists: 2, price: 40 },
            { name: 'Noah Allen', position: 'Defender', rating: 75, goals: 0, assists: 1, price: 35 },
            { name: 'Diego Gómez', position: 'Midfielder', rating: 77, goals: 1, assists: 2, price: 40 },
            { name: 'Matías Rojas', position: 'Midfielder', rating: 77, goals: 1, assists: 2, price: 40 },
            { name: 'Jordi Alba', position: 'Defender', rating: 82, goals: 2, assists: 5, price: 60 },
            { name: 'Oscar Ustari', position: 'Goalkeeper', rating: 78, goals: 0, assists: 0, price: 40 },
            { name: 'Drake Callender', position: 'Goalkeeper', rating: 78, goals: 0, assists: 0, price: 40 },
            { name: 'Héctor David Martínez', position: 'Defender', rating: 77, goals: 0, assists: 1, price: 40 },
            { name: 'Serhiy Kryvtsov', position: 'Defender', rating: 77, goals: 0, assists: 1, price: 40 },
            { name: 'Julian Gressel', position: 'Midfielder', rating: 77, goals: 1, assists: 2, price: 40 },
            { name: 'Robert Taylor', position: 'Midfielder', rating: 77, goals: 1, assists: 2, price: 40 },
            { name: 'Pep Casas', position: 'Midfielder', rating: 77, goals: 1, assists: 2, price: 40 },
            { name: 'Nicolás Freire', position: 'Defender', rating: 77, goals: 0, assists: 1, price: 40 },
            { name: 'Lautaro Martinez', position: 'Forward', rating: 86, goals: 16, assists: 6, price: 90 },
            { name: 'Yann Sommer', position: 'Goalkeeper', rating: 84, goals: 0, assists: 0, price: 70 },
            { name: 'Federico Dimarco', position: 'Defender', rating: 84, goals: 3, assists: 7, price: 70 },
            { name: 'Nicolo Barella', position: 'Midfielder', rating: 85, goals: 5, assists: 8, price: 80 },
            { name: 'Hakan Çalhanoğlu', position: 'Midfielder', rating: 85, goals: 6, assists: 9, price: 80 },
            { name: 'Marcus Thuram', position: 'Forward', rating: 84, goals: 10, assists: 5, price: 75 },
            { name: 'Henrikh Mkhitaryan', position: 'Midfielder', rating: 83, goals: 4, assists: 6, price: 70 },
            { name: 'Mehdi Taremi', position: 'Forward', rating: 83, goals: 12, assists: 4, price: 70 },
            { name: 'Piotr Zieliński', position: 'Midfielder', rating: 83, goals: 4, assists: 7, price: 70 },
            { name: 'Joaquin Correa', position: 'Forward', rating: 82, goals: 7, assists: 3, price: 65 },
            { name: 'Denzel Dumfries', position: 'Defender', rating: 82, goals: 2, assists: 5, price: 65 },
            { name: 'Davide Frattesi', position: 'Midfielder', rating: 82, goals: 3, assists: 5, price: 65 },
            { name: 'Tajon Buchanan', position: 'Defender', rating: 81, goals: 1, assists: 3, price: 60 },
            { name: 'Benjamin Pavard', position: 'Defender', rating: 84, goals: 2, assists: 4, price: 70 },
            { name: 'Marko Arnautović', position: 'Forward', rating: 81, goals: 6, assists: 2, price: 60 },
            { name: 'Yann Aurel Bisseck', position: 'Defender', rating: 80, goals: 1, assists: 2, price: 55 },
            { name: 'Tomás Palacios', position: 'Defender', rating: 79, goals: 0, assists: 1, price: 50 },
            { name: 'Carlos Augusto', position: 'Defender', rating: 80, goals: 1, assists: 2, price: 55 },
            { name: 'Josep Martínez', position: 'Goalkeeper', rating: 79, goals: 0, assists: 0, price: 50 },
            { name: 'Alessandro Bastoni', position: 'Defender', rating: 85, goals: 2, assists: 3, price: 75 },
            { name: 'Declan Rice', position: 'Midfielder', rating: 87, goals: 4, assists: 7, price: 85 },
            { name: 'Bukayo Saka', position: 'Forward', rating: 88, goals: 15, assists: 10, price: 90 },
            { name: 'Mikel Merino', position: 'Midfielder', rating: 84, goals: 3, assists: 6, price: 70 },
            { name: 'Kai Havertz', position: 'Midfielder', rating: 84, goals: 5, assists: 6, price: 75 },
            { name: 'Ben White', position: 'Defender', rating: 84, goals: 2, assists: 4, price: 70 },
            { name: 'Martin Ødegaard', position: 'Midfielder', rating: 87, goals: 8, assists: 12, price: 85 },
            { name: 'Gabriel Martinelli', position: 'Forward', rating: 85, goals: 10, assists: 8, price: 80 },
            { name: 'William Saliba', position: 'Defender', rating: 85, goals: 3, assists: 2, price: 80 },
            { name: 'Norberto Murara Neto', position: 'Goalkeeper', rating: 82, goals: 0, assists: 0, price: 60 },
            { name: 'Oleksandr Zinchenko', position: 'Defender', rating: 83, goals: 1, assists: 5, price: 65 },
            { name: 'Kieran Tierney', position: 'Defender', rating: 82, goals: 1, assists: 3, price: 60 },
            { name: 'Ethan Nwaneri', position: 'Midfielder', rating: 77, goals: 1, assists: 1, price: 40 },
            { name: 'Gabriel Jesus', position: 'Forward', rating: 85, goals: 13, assists: 6, price: 80 },
            { name: 'Takehiro Tomiyasu', position: 'Defender', rating: 82, goals: 1, assists: 3, price: 60 },
            { name: 'Raheem Sterling', position: 'Forward', rating: 85, goals: 11, assists: 7, price: 80 },
            { name: 'Jorginho', position: 'Midfielder', rating: 84, goals: 2, assists: 5, price: 70 },
            { name: 'Jakub Kiwior', position: 'Defender', rating: 80, goals: 1, assists: 2, price: 55 },
            { name: 'David Raya', position: 'Goalkeeper', rating: 82, goals: 0, assists: 0, price: 60 },
            { name: 'Leandro Trossard', position: 'Forward', rating: 84, goals: 7, assists: 5, price: 70 },
            { name: 'Riccardo Calafiori', position: 'Defender', rating: 80, goals: 1, assists: 2, price: 55 },
            { name: 'Erling Haaland', position: 'Forward', rating: 92, goals: 36, assists: 8, price: 120 },
            { name: 'Bernardo Silva', position: 'Midfielder', rating: 88, goals: 9, assists: 13, price: 90 },
            { name: 'Ruben Dias', position: 'Defender', rating: 88, goals: 2, assists: 2, price: 90 },
            { name: 'Kevin De Bruyne', position: 'Midfielder', rating: 91, goals: 10, assists: 20, price: 110 },
            { name: 'Rodri', position: 'Midfielder', rating: 88, goals: 6, assists: 10, price: 90 },
            { name: 'Savinho', position: 'Forward', rating: 82, goals: 4, assists: 4, price: 60 },
            { name: 'Phil Foden', position: 'Midfielder', rating: 87, goals: 12, assists: 10, price: 85 },
            { name: 'Kyle Walker', position: 'Defender', rating: 86, goals: 1, assists: 5, price: 80 },
            { name: 'İlkay Gündoğan', position: 'Midfielder', rating: 85, goals: 6, assists: 8, price: 80 },
            { name: 'Mateo Kovacic', position: 'Midfielder', rating: 84, goals: 3, assists: 5, price: 75 },
            { name: 'Jérémy Doku', position: 'Forward', rating: 84, goals: 8, assists: 6, price: 70 },
            { name: 'Matheus Nunes', position: 'Midfielder', rating: 84, goals: 3, assists: 5, price: 70 },
            { name: 'Jack Grealish', position: 'Midfielder', rating: 85, goals: 7, assists: 8, price: 80 },
            { name: 'Ederson', position: 'Goalkeeper', rating: 89, goals: 0, assists: 1, price: 85 },
            { name: 'Joško Gvardiol', position: 'Defender', rating: 85, goals: 2, assists: 3, price: 80 },
            { name: 'Rico Lewis', position: 'Defender', rating: 80, goals: 1, assists: 2, price: 55 },
            { name: 'Nathan Aké', position: 'Defender', rating: 84, goals: 2, assists: 3, price: 70 },
            { name: 'John Stones', position: 'Defender', rating: 85, goals: 2, assists: 3, price: 80 },
            { name: 'Manuel Akanji', position: 'Defender', rating: 84, goals: 2, assists: 3, price: 70 },
            { name: 'James McAtee', position: 'Midfielder', rating: 77, goals: 1, assists: 1, price: 40 }
        ];

        let charts = {};

        // Initialize charts
        function initCharts() {
            // Top 10 Highest Rated Players Heatmap-Style Horizontal Bar Chart
            const topRated = [...playersData].sort((a, b) => b.rating - a.rating).slice(0, 10);
            // Generate a color for each bar based on rating (higher = darker blue)
            function ratingToColor(rating) {
                // 80 = light blue, 100 = dark blue
                const min = 80, max = 100;
                const percent = (rating - min) / (max - min);
                const blue = Math.round(234 - percent * 100); // 234 to 134
                return `rgba(102, 126, ${blue}, 0.85)`;
            }
            charts.topRatedHeatmap = new Chart(document.getElementById('topRatedHeatmap').getContext('2d'), {
                type: 'bar',
                data: {
                    labels: topRated.map(p => p.name),
                    datasets: [{
                        label: 'Rating',
                        data: topRated.map(p => p.rating),
                        backgroundColor: topRated.map(p => ratingToColor(p.rating)),
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.raw}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 100,
                            title: { display: true, text: 'Rating' }
                        }
                    }
                }
            });

            // Scatter Chart
            const scatterCtx = document.getElementById('scatterChart').getContext('2d');
            charts.scatter = new Chart(scatterCtx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Players',
                        data: playersData.map(p => ({ x: p.goals, y: p.assists, player: p.name })),
                        backgroundColor: 'rgba(102, 126, 234, 0.6)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const d = context.raw;
                                    return `${d.player}: Goals ${d.x}, Assists ${d.y}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Goals'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Assists'
                            }
                        }
                    }
                }
            });

            // Pie Chart
            const pieCtx = document.getElementById('pieChart').getContext('2d');
            charts.pie = new Chart(pieCtx, {
                type: 'pie',
                data: {
                    labels: ['Forward', 'Midfielder', 'Defender', 'Goalkeeper'],
                    datasets: [{
                        data: [2, 4, 2, 2],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 205, 86, 0.8)',
                            'rgba(75, 192, 192, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            // Grouped Bar Chart: Top 10 Players by G+A (Goals & Assists)
            const topGA = [...playersData]
                .map(p => ({ ...p, ga: p.goals + p.assists }))
                .sort((a, b) => b.ga - a.ga)
                .slice(0, 10);
            const trendCtx = document.getElementById('trendChart').getContext('2d');
            charts.trend = new Chart(trendCtx, {
                type: 'bar',
                data: {
                    labels: topGA.map(p => p.name),
                    datasets: [
                        {
                            label: 'Goals',
                            data: topGA.map(p => p.goals),
                            backgroundColor: 'rgba(102, 126, 234, 0.8)'
                        },
                        {
                            label: 'Assists',
                            data: topGA.map(p => p.assists),
                            backgroundColor: 'rgba(255, 205, 86, 0.8)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });

            // Top 10 Most Expensive Players Bar Chart
            const topExpensive = [...playersData].sort((a, b) => b.price - a.price).slice(0, 10);
            const expensiveCtx = document.createElement('canvas');
            expensiveCtx.id = 'expensiveChart';
            document.querySelector('.charts-grid').insertAdjacentHTML('beforeend', `
                <div class="chart-container">
                    <div class="chart-header">
                        <span class="chart-title">Top 10 Most Expensive Players</span>
                    </div>
                    <div class="chart-canvas">
                        <canvas id="expensiveChart"></canvas>
                    </div>
                </div>
            `);
            charts.expensive = new Chart(document.getElementById('expensiveChart').getContext('2d'), {
                type: 'bar',
                data: {
                    labels: topExpensive.map(p => p.name),
                    datasets: [{
                        label: 'Price ($)',
                        data: topExpensive.map(p => p.price),
                        backgroundColor: 'rgba(255, 99, 132, 0.8)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });

            // 1. Average Rating by Position
            const positions = ['Forward', 'Midfielder', 'Defender', 'Goalkeeper'];
            const avgRatings = positions.map(pos => {
                const filtered = playersData.filter(p => p.position === pos);
                return filtered.length ? (filtered.reduce((sum, p) => sum + p.rating, 0) / filtered.length).toFixed(2) : 0;
            });
            charts.avgRatingByPosition = new Chart(document.getElementById('avgRatingByPosition').getContext('2d'), {
                type: 'bar',
                data: {
                    labels: positions,
                    datasets: [{
                        label: 'Average Rating',
                        data: avgRatings,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 205, 86, 0.8)',
                            'rgba(75, 192, 192, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, max: 100 } }
                }
            });

            // 2. Top 10 Most Expensive Defenders (Horizontal Bar)
            const topDefenders = playersData.filter(p => p.position === 'Defender').sort((a, b) => b.price - a.price).slice(0, 10);
            charts.expensiveDefenders = new Chart(document.getElementById('expensiveDefenders').getContext('2d'), {
                type: 'bar',
                data: {
                    labels: topDefenders.map(p => p.name),
                    datasets: [{
                        label: 'Price',
                        data: topDefenders.map(p => p.price),
                        backgroundColor: 'rgba(255, 99, 132, 0.8)'
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { x: { beginAtZero: true } }
                }
            });

            // 3. Player Count by Price Range (Polar Area)
            const priceRanges = [0, 0, 0, 0]; // Under $50, $50–$79, $80–$99, $100+
            playersData.forEach(p => {
                if (p.price < 50) priceRanges[0]++;
                else if (p.price < 80) priceRanges[1]++;
                else if (p.price < 100) priceRanges[2]++;
                else priceRanges[3]++;
            });
            charts.pricePolar = new Chart(document.getElementById('pricePolar').getContext('2d'), {
                type: 'polarArea',
                data: {
                    labels: ['Under $50', '$50–$79', '$80–$99', '$100+'],
                    datasets: [{
                        data: priceRanges,
                        backgroundColor: [
                            'rgba(102, 126, 234, 0.8)',
                            'rgba(255, 205, 86, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 99, 132, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            // 4. Top 10 Players by Assists (Radar Chart)
            const topAssists = [...playersData].sort((a, b) => b.assists - a.assists).slice(0, 10);
            charts.topAssists = new Chart(document.getElementById('topAssists').getContext('2d'), {
                type: 'radar',
                data: {
                    labels: topAssists.map(p => p.name),
                    datasets: [{
                        label: 'Assists',
                        data: topAssists.map(p => p.assists),
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        pointBackgroundColor: 'rgba(54, 162, 235, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(54, 162, 235, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            angleLines: { display: true },
                            suggestedMin: 0
                        }
                    }
                }
            });

            // Doughnut Chart: Rating Distribution
            const ratingBuckets = [0, 0, 0, 0]; // 90+, 85-89, 80-84, <80
            playersData.forEach(p => {
                if (p.rating >= 90) ratingBuckets[0]++;
                else if (p.rating >= 85) ratingBuckets[1]++;
                else if (p.rating >= 80) ratingBuckets[2]++;
                else ratingBuckets[3]++;
            });
            charts.ratingDoughnut = new Chart(document.getElementById('ratingDoughnut').getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: ['90+', '85-89', '80-84', '<80'],
                    datasets: [{
                        data: ratingBuckets,
                        backgroundColor: [
                            'rgba(102, 126, 234, 0.8)',
                            'rgba(255, 205, 86, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 99, 132, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }

        function updateScatterChart(filter) {
            // Update scatter chart
            let data;
            if (filter === 'top') {
                data = [...playersData]
                    .map(p => ({ ...p, ga: p.goals + p.assists }))
                    .sort((a, b) => b.ga - a.ga)
                    .slice(0, 20)
                    .map(p => ({ x: p.goals, y: p.assists, player: p.name }));
                document.getElementById('scatterAllBtn').classList.remove('active');
                document.getElementById('scatterTopBtn').classList.add('active');
            } else {
                data = playersData.map(p => ({ x: p.goals, y: p.assists, player: p.name }));
                document.getElementById('scatterAllBtn').classList.add('active');
                document.getElementById('scatterTopBtn').classList.remove('active');
            }
            charts.scatter.data.datasets[0].data = data;
            charts.scatter.update();
        }

        function populateTable() {
            const tbody = document.getElementById('playersTableBody');
            tbody.innerHTML = playersData.map(player => `
                <tr>
                    <td>${player.name}</td>
                    <td>${player.position}</td>
                    <td><span class="rating-badge ${player.rating >= 88 ? 'rating-high' : player.rating >= 85 ? 'rating-medium' : 'rating-low'}">${player.rating}</span></td>
                    <td>${player.goals}</td>
                    <td>${player.assists}</td>
                    <td>$${player.price}</td>
                </tr>
            `).join('');
        }

        function searchPlayers() {
            const searchTerm = document.getElementById('playerSearch').value.toLowerCase();
            const filteredPlayers = playersData.filter(player => 
                player.name.toLowerCase().includes(searchTerm) ||
                player.position.toLowerCase().includes(searchTerm)
            );
            
            const tbody = document.getElementById('playersTableBody');
            tbody.innerHTML = filteredPlayers.map(player => `
                <tr>
                    <td>${player.name}</td>
                    <td>${player.position}</td>
                    <td><span class="rating-badge ${player.rating >= 88 ? 'rating-high' : player.rating >= 85 ? 'rating-medium' : 'rating-low'}">${player.rating}</span></td>
                    <td>${player.goals}</td>
                    <td>${player.assists}</td>
                    <td>$${player.price}</td>
                </tr>
            `).join('');
        }

        // Event listeners
        document.getElementById('playerSearch').addEventListener('input', searchPlayers);
        document.getElementById('sortSelect').addEventListener('change', function() {
            const sortBy = this.value;
            const sortedPlayers = [...playersData].sort((a, b) => b[sortBy] - a[sortBy]);
            
            const tbody = document.getElementById('playersTableBody');
            tbody.innerHTML = sortedPlayers.map(player => `
                <tr>
                    <td>${player.name}</td>
                    <td>${player.position}</td>
                    <td><span class="rating-badge ${player.rating >= 88 ? 'rating-high' : player.rating >= 85 ? 'rating-medium' : 'rating-low'}">${player.rating}</span></td>
                    <td>${player.goals}</td>
                    <td>${player.assists}</td>
                    <td>$${player.price}</td>
                </tr>
            `).join('');
        });

        // Initialize on page load
        window.addEventListener('load', function() {
            initCharts();
            populateTable();
        });
    </script>
</body>
</html> 